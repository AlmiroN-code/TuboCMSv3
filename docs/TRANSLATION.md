# –ü–µ—Ä–µ–≤–æ–¥—ã –≤ TubeCMS v3

## –û–±–∑–æ—Ä

TubeCMS v3 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ Django. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ —è–∑—ã–∫–∞:

- **English (en)** - —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–†—É—Å—Å–∫–∏–π (ru)** - –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```
locale/
‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îî‚îÄ‚îÄ LC_MESSAGES/
‚îÇ       ‚îú‚îÄ‚îÄ django.po  # –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
‚îÇ       ‚îî‚îÄ‚îÄ django.mo  # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
‚îî‚îÄ‚îÄ ru/
    ‚îî‚îÄ‚îÄ LC_MESSAGES/
        ‚îú‚îÄ‚îÄ django.po  # –†—É—Å—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
        ‚îî‚îÄ‚îÄ django.mo  # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
```

## –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

### base.html
–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω, –≤–∫–ª—é—á–∞—è:
- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é
- –ü–æ–∏—Å–∫
- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
- –§—É—Ç–µ—Ä
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### profile.html
–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —à–∞–±–ª–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –í–∫–ª–∞–¥–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
- –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø—É—Å—Ç—ã—Ö —Å–ø–∏—Å–∫–∞—Ö
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥—Ä—É–∑—å—è—Ö –∏ –ø–æ–¥–ø–∏—Å–∫–∞—Ö

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Ç—å —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Settings
2. –í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫ –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ "Language"
3. –ù–∞–∂–∞—Ç—å "Save Settings"

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
- –Ø–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ `UserLanguageMiddleware`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–µ—Å—Å–∏–∏ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Middleware
```python
# apps/core/middleware.py
class UserLanguageMiddleware(MiddlewareMixin):
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —è–∑—ã–∫ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
```

### Template Tags
```python
# apps/core/templatetags/core_tags.py
@register.simple_tag
def current_language():
    """–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫ –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–∞ lang –≤ HTML"""
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–∑—ã–≤–∞–ª–∞—Å—å `get_current_language`, –Ω–æ –±—ã–ª–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ `current_language` —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º Django template tag –∏–∑ –ø–∞–∫–µ—Ç–∞ `i18n`.

### –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```python
# apps/users/models.py
LANGUAGE_CHOICES = [
    ("en", "English"),
    ("ru", "–†—É—Å—Å–∫–∏–π"),
]

class UserProfile(models.Model):
    language = models.CharField(
        max_length=5, 
        choices=LANGUAGE_CHOICES, 
        default="en"
    )
```

## –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
- Home / –ì–ª–∞–≤–Ω–∞—è
- Videos / –í–∏–¥–µ–æ  
- Categories / –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
- Popular / –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ
- Trends / –¢—Ä–µ–Ω–¥—ã

### –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Login / –í–æ–π—Ç–∏
- Register / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- Upload / –ó–∞–≥—Ä—É–∑–∏—Ç—å
- Settings / –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- Logout / –í—ã—Ö–æ–¥

### –ü—Ä–æ—Ñ–∏–ª—å
- My Profile / –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- Edit Profile / –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- Favorites / –ò–∑–±—Ä–∞–Ω–Ω—ã–µ
- Watch Later / –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ
- Subscriptions / –ü–æ–¥–ø–∏—Å–∫–∏
- Playlists / –ü–ª–µ–π–ª–∏—Å—Ç—ã
- Friends / –î—Ä—É–∑—å—è
- Notifications / –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- Subscribe / –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
- Unsubscribe / –û—Ç–ø–∏—Å–∞—Ç—å—Å—è
- Add to friends / –î–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–∑—å—è
- Remove from friends / –£–¥–∞–ª–∏—Ç—å –∏–∑ –¥—Ä—É–∑–µ–π
- Accept / –ü—Ä–∏–Ω—è—Ç—å
- Decline / –û—Ç–∫–ª–æ–Ω–∏—Ç—å

### –°–æ–æ–±—â–µ–Ω–∏—è
- User has not uploaded any videos yet. / –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª –≤–∏–¥–µ–æ.
- You have no favorite videos / –£ –≤–∞—Å –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
- Watch Later list is empty. / –°–ø–∏—Å–æ–∫ "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ" –ø—É—Å—Ç.
- You have no notifications. / –£ –≤–∞—Å –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### 1. –î–æ–±–∞–≤–∏—Ç—å {% trans %} —Ç–µ–≥–∏ –≤ —à–∞–±–ª–æ–Ω—ã
```html
<h1>{% trans 'Page Title' %}</h1>
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å .po —Ñ–∞–π–ª—ã
–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ `locale/ru/LC_MESSAGES/django.po`:
```
msgid "Page Title"
msgstr "–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã"
```

### 3. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
–ü–æ—Å–∫–æ–ª—å–∫—É gettext –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ .mo —Ñ–∞–π–ª—ã.
Django –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback –∫ –∏—Å—Ö–æ–¥–Ω—ã–º —Å—Ç—Ä–æ–∫–∞–º.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django

### settings/base.py
```python
LANGUAGE_CODE = "en"  # –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
LANGUAGES = [
    ("en", "English"),
    ("ru", "–†—É—Å—Å–∫–∏–π"),
]
LOCALE_PATHS = [BASE_DIR / "locale"]
USE_I18N = True
```

### Middleware
```python
MIDDLEWARE = [
    # ...
    "django.middleware.locale.LocaleMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware", 
    "apps.core.middleware.UserLanguageMiddleware",  # –ü–æ—Å–ª–µ AuthenticationMiddleware
    # ...
]
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä: `python manage.py runserver`
2. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ Settings
4. –í—ã–±—Ä–∞—Ç—å "–†—É—Å—Å–∫–∏–π" –≤ –ø–æ–ª–µ Language
5. –ù–∞–∂–∞—Ç—å "Save Settings"
6. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
7. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—Ö–æ–¥–µ —è–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

## –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–≤–æ–¥–æ–≤

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:**
- –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω (base.html)
- –®–∞–±–ª–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è (profile.html)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
- Middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

üîÑ **–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:**
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã (videos, comments, etc.)
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–µ—Ä–µ–≤–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ gettext tools —á–µ—Ä–µ–∑ fallback –º–µ—Ö–∞–Ω–∏–∑–º Django
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ .mo —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- –í—Å–µ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±–µ—Ä–Ω—É—Ç—ã –≤ {% trans %} —Ç–µ–≥–∏
- –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - English –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π