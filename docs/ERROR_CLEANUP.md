# Автоматическая очистка при ошибках

## Описание

Система автоматически удаляет временные и частично обработанные файлы при ошибках.

## Что очищается

- Временные файлы FFmpeg
- Частично созданные выходные файлы
- Неудачные попытки кодирования
- Поврежденные превью изображения

## Как работает

```python
try:
    # Обработка видео
    result = process_video()
except Exception as e:
    # Автоматическая очистка
    self._cleanup_on_error(temp_files, output_files)
    raise e
```

## Преимущества

- Нет мусорных файлов на диске
- Экономия дискового пространства
- Чистота файловой системы
- Предотвращение накопления ошибочных файлов

## Реализация

В `apps/videos/services_encoding.py` метод `_cleanup_on_error()`